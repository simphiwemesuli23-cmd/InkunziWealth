<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Complete Investment - Inkunzi Wealth Group</title>

<style>
body{
  font-family:'Segoe UI',sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}
.container{
  max-width:420px;
  margin:auto;
}
.card{
  background:#fff;
  border-radius:18px;
  padding:20px;
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
}
h2{
  text-align:center;
  color:#4f46e5;
}
.section{
  margin-bottom:16px;
}
.section p{
  margin:6px 0;
  font-size:14px;
}
.code-box{
  background:#eef2ff;
  padding:14px;
  border-radius:12px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  letter-spacing:2px;
  color:#1e40af;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:16px;
  cursor:pointer;
  margin-top:10px;
}
.copy-btn{ background:#4f46e5; color:#fff; }
.invest-btn{ background:#059669; color:#fff; }

.qr-box{
  text-align:center;
  margin-top:10px;
}
.qr-box canvas{
  margin-top:10px;
}
.notice{
  font-size:12px;
  color:#6b7280;
  text-align:center;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="container">
<div class="card">

<h2>Complete Your Investment</h2>

<div class="section">
  <p><b>Plan:</b> <span id="planName"></span></p>
  <p><b>Amount:</b> R<span id="amount"></span></p>
  <p><b>Expected Profit:</b> R<span id="profit"></span></p>
</div>

<div class="section">
  <p><b>Bank:</b> Capitec</p>
  <p><b>Branch Code:</b> 470010</p>
  <p><b>Account Holder:</b> Mr SM Ndebele</p>
  <p><b>Account Number:</b> 2022710070</p>
</div>

<div class="section">
  <p><b>Your Investment Code</b></p>
  <div class="code-box" id="code"></div>
  <button class="copy-btn" id="copyBtn">Copy Code</button>
</div>

<div class="section qr-box">
  <p><b>Scan to Pay</b></p>
  <canvas id="qrCanvas"></canvas>
</div>

<button class="invest-btn" id="investBtn">Invest Now</button>

<p class="notice">
Scan the QR or use the details above.  
Send your investment code to admin after payment.
</p>

</div>
</div>

<!-- QR Library -->
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<script>
const selectedPlan = JSON.parse(localStorage.getItem('selectedPlan'));
if(!selectedPlan) location.href='dashboard.html';

planName.innerText = selectedPlan.plan;
amount.innerText = selectedPlan.amount;
profit.innerText = (selectedPlan.amount * selectedPlan.multiplier).toFixed(2);
code.innerText = selectedPlan.code;

/* COPY CODE */
copyBtn.onclick = ()=>{
  navigator.clipboard.writeText(selectedPlan.code);
  copyBtn.innerText='Copied âœ”';
  setTimeout(()=>copyBtn.innerText='Copy Code',2000);
};

/* QR CONTENT */
const qrData = `
Bank: Capitec
Branch Code: 470010
Account Holder: Mr SM Ndebele
Account Number: 2022710070
Investment Code: ${selectedPlan.code}
`;

/* GENERATE QR */
QRCode.toCanvas(
  document.getElementById('qrCanvas'),
  qrData,
  { width:200 },
  function (error) {
    if (error) console.error(error);
  }
);

/* INVEST NOW */
investBtn.onclick = ()=>{
  let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
  transactions.push({
    ...selectedPlan,
    verified:false,
    paid:false,
    readyForAdmin:false
  });
  localStorage.setItem('transactions',JSON.stringify(transactions));
  localStorage.removeItem('selectedPlan');
  location.replace('dashboard.html');
};

/* BLOCK BACK */
history.pushState(null,null,location.href);
onpopstate=()=>history.go(1);
</script>

</body>
</html>